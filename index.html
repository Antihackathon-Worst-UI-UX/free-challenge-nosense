<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>AntiHackatón</title>
</head>
<body>
    <header>
        <h1>NoSense Page</h1>
    </header>
    <main class="login-container">
        <form class="login-form" id="loginForm">
            <h2>Iniciar Sesión</h2>
            <label for="usuario">Usuario</label>
            <input type="text" id="usuario" name="usuario" placeholder="Ingrese su usuario" required>
            <label for="clave">Contraseña</label>
            <input type="password" id="clave" name="clave" placeholder="Ingrese su contraseña" required>
            <button type="submit">Iniciar Sesión</button>
        </form>
        <form class="login-form" id="registroForm" style="display:none;">
            <h2>Registro</h2>
        
            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" name="nombre" placeholder="Ingrese su nombre" readonly>
            <div id="tecladoNombre" class="teclado"></div>
        
            <label for="correo">Correo</label>
            <input type="email" id="correo" name="correo" placeholder="Ingrese su correo" required>
            <div id="tecladoCorreo" class="teclado"></div>

            <label for="claveRegistro">Contraseña</label>
            <input type="password" id="claveRegistro" name="claveRegistro" placeholder="Ingrese su contraseña" required>
            <div id="tecladoClave" class="teclado"></div>

            <h3>Fecha de nacimiento</h3>
            <div class="fecha">
              <label>Día:</label>
              <span id="dia">0</span>
              <button type="button" onclick="incrementar('dia')">+</button>
            </div>
            <div class="fecha">
              <label>Mes:</label>
              <span id="mes">0</span>
              <button type="button" onclick="incrementar('mes')">+</button>
            </div>
            <div class="fecha">
              <label>Año:</label>
              <span id="anio">0</span>
              <button type="button" onclick="incrementar('anio')">+</button>
            </div>
        
            <button id="btnRegistro">Registrarse</button>
        </form>

    
        <div id="mensaje"></div>
    </main>

    <div id="modal" class="modal">
        <div class="modal-content">
            <img src="src/sus-dog.gif" alt="Registro obligatorio" style="width:100%; border-radius:8px;">
            <p>Debes registrarte antes de iniciar sesión</p>
            <button id="registroBtn">Ir a Registro</button>
        </div>
    </div>

    <script>

    window.addEventListener('load', function() {
        setTimeout(() => {
            document.getElementById('modal').style.display = 'flex';
        }, 3000);
    });

    document.getElementById('registroBtn').addEventListener('click', function() {
        document.getElementById('modal').style.display = 'none';
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('registroForm').style.display = 'block';
    
	    inicializarTeclados();
	});

    function crearTeclado(letras, contenedorId, inputId) {
        const contenedor = document.getElementById(contenedorId);
        const input = document.getElementById(inputId);
        letras = letras.split("");
        letras.sort(() => Math.random() - 0.5);
    
        let mayusculas = true; 

        const shiftBtn = document.createElement("button");
        shiftBtn.innerText = "Shift";
        shiftBtn.style.backgroundColor = "orange";
        shiftBtn.addEventListener("click", (e) => {
            e.preventDefault();
            mayusculas = !mayusculas;
            actualizarTeclas();
        });
        contenedor.appendChild(shiftBtn);
    
        const borrarBtn = document.createElement("button");
        borrarBtn.innerText = "Borrar";
        borrarBtn.style.backgroundColor = "red";
        borrarBtn.addEventListener("click", (e) => {
            e.preventDefault();
            input.value = input.value.slice(0, -1);
        });
        contenedor.appendChild(borrarBtn);
 
        const botones = [];
        letras.forEach(letra => {
            const btn = document.createElement("button");
            btn.style.setProperty("--rand", Math.random());
            btn.addEventListener("click", (e) => {
                e.preventDefault();
                input.value += mayusculas ? letra.toUpperCase() : letra.toLowerCase();
            });
            botones.push(btn);
            contenedor.appendChild(btn);
        });
    
        function actualizarTeclas() {
            letras.forEach((letra, i) => {
                botones[i].innerText = mayusculas ? letra.toUpperCase() : letra.toLowerCase();
            });
        }
    
        actualizarTeclas();
    }    
    function inicializarTeclados() {
        document.getElementById("tecladoNombre").innerHTML = "";
		document.getElementById("tecladoCorreo").innerHTML = "";
		document.getElementById("tecladoClave").innerHTML = "";

        crearTeclado("ABCDEFGHIJKLMNOPQRSTUVWXYZ", "tecladoNombre", "nombre");
        crearTeclado("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@._", "tecladoCorreo", "correo");
        crearTeclado("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()", "tecladoClave", "claveRegistro");
	}
    
    
    function incrementar(campo) {//limitar por campo 31, 12, 2025
        let valor = parseInt(document.getElementById(campo).innerText);
        valor++;
        document.getElementById(campo).innerText = valor;
    }
     
	const btnReg = document.getElementById("btnRegistro");
	let rebotes = 0;
	
	btnReg.addEventListener("click", ()=> {
		originalRect = btnReg.getBoundingClientRect();
		originalParent = btnReg.parentElement;
		btnReg.style.position = "fixed";
	    let x = originalRect.left;
	    let y = originalRect.top;
	    let vx = 5;
	    let vy = 5;
		const ancho = window.innerWidth - btnReg.offsetWidth;
		const alto = window.innerHeight -btnReg.offsetHeight;
		let startTime = Date.now();

		function rebotar() {
			let tiempo = Date.now()- startTime;
			if (x <= 0 || x >= ancho) vx *= -1;
			if (y <= 0 || y >= alto) vy *= -1;
			x += vx;
			y += vy;
            btnReg.style.left = x + "px";
			btnReg.style.top = y + "px";
			if (tiempo < 3000){
				requestAnimationFrame(rebotar);
			} else {
				rebotes++;
				if (rebotes < 5){
					startTime = Date.now();
					requestAnimationFrame(rebotar);
				} else {
					btnReg.style.position = "relative";
					btnReg.style.left = "0px";
              		btnReg.style.top = "0px";
					guardarRegistro();
				}
			}
		}
		rebotar();
	});
	function guardarRegistro() {
	  alert("Registro guardado");
	}
	
    </script>
</body>
</html>
